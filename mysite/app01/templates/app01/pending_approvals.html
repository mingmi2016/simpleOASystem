{% extends 'base.html' %}

{% block content %}
<h1>待审批请求</h1>
{% if pending_approvals %}
    <table border="1">
        <thead>
            <tr>
                <th>供应请求</th>
                <th>申请人</th>
                <th>申请原因</th>
                <th>办公用品</th>
                <th>数量</th>
                <th>步骤</th>
                <th>创建时间</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody>
        {% for approval in pending_approvals %}
            <tr>
                <td>{{ approval.supply_request }}</td>
                <td>{{ approval.supply_request.employee }}</td>
                <td>{{ approval.supply_request.reason }}</td>
                <td>
                    <ul>
                    {% for item in approval.items %}
                        <li>{{ item.supply_option.name }}</li>
                    {% endfor %}
                    </ul>
                </td>
                <td>
                    <ul>
                    {% for item in approval.items %}
                        <li>{{ item.quantity }}</li>
                    {% endfor %}
                    </ul>
                </td>
                <td>{{ approval.step.name }}</td>
                <td>{{ approval.created_at }}</td>
                <td><a href="{% url 'approve_request' approval.id %}">审批</a></td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>没有待审批的请求。</p>
{% endif %}
{% endblock %}
